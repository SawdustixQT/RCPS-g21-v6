# Разработка кроссплатформенных программных систем
Группа ИКБО-21-22 Вариант 6


УВМ (Учебно вычислительная машина) поддерживает 4 команды:
1) Загрузка константы<br>

| A | B | C |
| :--- | :--- | :--- |
| Биты 0—6 | Биты 7—10 | Биты 11—31 | 
| 111 | Адрес | Константа | 

Размер команды: 4 байт. Операнд: поле C. Результат: регистр по адресу, 
которым является поле B. 
<br>

2) Чтение значения из памяти<br>

| A | B | C |
| :--- | :--- | :--- |
| Биты 0—6 | Биты 7—31 | Биты 32—35 | 
| 37 | Адрес | Адрес | 

Размер команды: 5 байт. Операнд: значение в памяти по адресу, которым 
является поле B. Результат: регистр по адресу, которым является поле C. 
<br>
3) Запись значения в память<br> 

| A | B | C | D |
| :--- | :--- | :--- | :--- |
| Биты 0—6 | Биты 7—10 | Биты 11—14 | Биты 15—20 |
| 83 | Адрес | Адрес | Смещение |

Размер команды: 3 байт. Операнд: регистр по адресу, которым является поле C. Результат: значение в памяти по адресу, которым является сумма адреса (регистр по адресу, которым является поле B) и смещения (поле D).
<br>
4) Бинарная операция: "<=" <br>

| A | B | C |
| :--- | :--- | :--- |
| Биты 0—6 | Биты 7—10 | Биты 11—14 | 
| 111 | Адрес | Адрес | 

Размер команды: 2 байт. Первый операнд: регистр по адресу, которым 
является поле C. Второй операнд: значение в памяти по адресу, которым является 
регистр по адресу, которым является поле B. Результат: регистр по адресу, 
которым является поле C. <br>

# Пример программы 
Программа оформляется внутри json файла по следующему формату

```
{
    "program": {
        "name": "",
        "architecture": "",
        "os": "",
        "description": "",
        "instructions": [
		{
			"op": "LOAD",
			"reg_addr": 13,
			"const": 508
		},
		{
			"op": "READ",
			"mem_addr": 934,
			"reg_addr": 14
		},
		{
			"op": "WRITE",
			"base_reg_addr": 13,
			"reg_addr": 6,
			"offset": 7
		},
		{
			"op": "BIN_OP",
			"base_reg_addr": 6,
			"acc_reg_addr": 4
		}
		]
    }
}
```

Основной код программы записывается в список instructions. Каждый элемент списка - это одна из 4 команд. 

Для этапа 3 была реализована тестовая программа "test_arrays.json", которая копирует копирует массив с 
одного адреса на другой, чтобы проверить корректность работы.

Создание бинарного файла через командную строку (аргумент -t включает режим тестирования и не обязателен для ввода).
```
python asm.py -i 'файл_с_ассемблером.json' -o 'выходной_бинарный_файл.bin' [-t True]
```

Запуск интерпретатора программы через командную строку.
```
python asm_iter.py -i 'входной_бинарный_файл.bin' -o 'выходной_дамп_памяти.json' -r 0-1024
```